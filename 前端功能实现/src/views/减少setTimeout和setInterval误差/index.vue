<template>
  <div>

    è¯¯å·®{{ error }}
    <el-button type="primary" @click="handlerTime"
      >ç‚¹å‡»æˆ‘è§¦å‘å®šæ—¶å™¨(ç­‰2ç§’)</el-button
    >

  <!-- <div>{{ html }}</div> -->

  </div>
</template>

<script setup lang="ts">
import { ref, reactive, defineComponent, h } from 'vue'

const error = ref(0)
const delay = 2000


const handlerTime = () => {
  const start = new Date().getTime()

  //   setTimeout(() => {
  //   let now = new Date().getTime()
  //    let activeTime = now - start
  //    error.value = activeTime - delay
  //    console.log("ğŸš€ ~ file: index.vue:19 ~ setTimeout ~ now - start:", now , start)
  //  }, delay);
  timer()
  /* æ·»åŠ jsçº¿ç¨‹é˜»ç¢ */
  for (let i = 0; i < 50000; i++) {
    console.log(i)
    const element = i
  }
}



function timer (): void {
  const speed = 500
  let counter = 1
  const start = new Date().getTime()

  function instance (): void {
    const ideal = counter * speed
    const real = new Date().getTime() - start

    counter++

    const diff = real - ideal
    error.value = diff

    window.setTimeout(function () {
      instance()
    }, speed - diff) // é€šè¿‡ç³»ç»Ÿæ—¶é—´è¿›è¡Œä¿®å¤
  }

  window.setTimeout(function () {
    instance()
  }, speed)
}
</script>

<style lang="less">


</style>
